2024-09-06 15:32:14,499 - api.v1.endpoints.example_post - INFO - Received request with data: 大樓工程需要做的子工程有哪些？
2024-09-06 15:32:14,560 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'api-key': 'b6133f8c130a4d659443d29871845c80'}, 'files': None, 'json_data': {'messages': [{'content': '請你將使用者輸入的字串提取關鍵字，請不要更改句子中的字，以下是範例 \n                Example1:\n                    使用者:"大樓工程中的假設工程中的子工程，基地整地需要的一般其他類檢查標準有哪些？"\n                    關鍵字: [\'大樓工程\', \'假設工程\', \'基地整地\', \'一般其他類\']\n                Example2:\n                    使用者:"大樓工程中的假設工程中的子工程，施工便道工程需要的墜落防止檢查標準有哪些？"\n                    關鍵字: [\'大樓工程\', \'假設工程\', \'施工便道工程\', \'墜落防止\']\n                Example3:\n                    使用者:"大樓工程中的假設工程，需要做的子工程順序？"\n                    關鍵字: [\'大樓工程\', \'假設工程\', \'施工便道工程\', \'墜落防止\']\n                Example4:\n                    使用者:"大樓工程中的假設工程中的子工程，支撐架需要的檢查表有哪些？"\n                    關鍵字: [\'大樓工程\', \'假設工程\', \'支撐架\']\n                Example5:\n                    使用者:"在大樓工程中的假設工程，哪些工程需要類別為環境保護的檢查標準?"\n                    關鍵字: [\'大樓工程\', \'假設工程\', \'環境保護\']\n                , 請將關鍵字以list形式輸出，只要輸出list就好', 'role': 'system'}, {'content': '大樓工程需要做的子工程有哪些？', 'role': 'user'}], 'model': 'gpt-3.5-turbo', 'logprobs': False, 'n': 1, 'stream': False, 'temperature': 0.3}}
2024-09-06 15:32:14,623 - openai._base_client - DEBUG - Sending HTTP Request: POST https://generevo-eastus-oai.openai.azure.com//openai/deployments/gpt-4o/chat/completions?api-version=2024-02-01
2024-09-06 15:32:14,624 - httpcore.connection - DEBUG - connect_tcp.started host='generevo-eastus-oai.openai.azure.com' port=443 local_address=None timeout=None socket_options=None
2024-09-06 15:32:14,867 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10be20c20>
2024-09-06 15:32:14,868 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10abb9250> server_hostname='generevo-eastus-oai.openai.azure.com' timeout=None
2024-09-06 15:32:15,703 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10bf05550>
2024-09-06 15:32:15,703 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-09-06 15:32:15,704 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-09-06 15:32:15,704 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-09-06 15:32:15,704 - httpcore.http11 - DEBUG - send_request_body.complete
2024-09-06 15:32:15,704 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-09-06 15:32:16,102 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Length', b'984'), (b'Content-Type', b'application/json'), (b'x-ms-region', b'East US'), (b'apim-request-id', b'd07428e6-9cc7-4f57-985c-bd3dbc3d0007'), (b'x-ratelimit-remaining-requests', b'9'), (b'x-accel-buffering', b'no'), (b'x-ms-rai-invoked', b'true'), (b'x-request-id', b'efa8576b-f788-4399-945b-dc73ed7a2743'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'azureml-model-session', b'd062-20240813102006'), (b'x-content-type-options', b'nosniff'), (b'x-envoy-upstream-service-time', b'186'), (b'x-ms-client-request-id', b'd07428e6-9cc7-4f57-985c-bd3dbc3d0007'), (b'x-ratelimit-remaining-tokens', b'9162'), (b'Date', b'Fri, 06 Sep 2024 07:32:15 GMT')])
2024-09-06 15:32:16,103 - httpx - INFO - HTTP Request: POST https://generevo-eastus-oai.openai.azure.com//openai/deployments/gpt-4o/chat/completions?api-version=2024-02-01 "HTTP/1.1 200 OK"
2024-09-06 15:32:16,104 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-09-06 15:32:16,104 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-09-06 15:32:16,104 - httpcore.http11 - DEBUG - response_closed.started
2024-09-06 15:32:16,104 - httpcore.http11 - DEBUG - response_closed.complete
2024-09-06 15:32:16,105 - openai._base_client - DEBUG - HTTP Response: POST https://generevo-eastus-oai.openai.azure.com//openai/deployments/gpt-4o/chat/completions?api-version=2024-02-01 "200 OK" Headers({'content-length': '984', 'content-type': 'application/json', 'x-ms-region': 'East US', 'apim-request-id': 'd07428e6-9cc7-4f57-985c-bd3dbc3d0007', 'x-ratelimit-remaining-requests': '9', 'x-accel-buffering': 'no', 'x-ms-rai-invoked': 'true', 'x-request-id': 'efa8576b-f788-4399-945b-dc73ed7a2743', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'azureml-model-session': 'd062-20240813102006', 'x-content-type-options': 'nosniff', 'x-envoy-upstream-service-time': '186', 'x-ms-client-request-id': 'd07428e6-9cc7-4f57-985c-bd3dbc3d0007', 'x-ratelimit-remaining-tokens': '9162', 'date': 'Fri, 06 Sep 2024 07:32:15 GMT'})
2024-09-06 15:32:16,105 - openai._base_client - DEBUG - request_id: efa8576b-f788-4399-945b-dc73ed7a2743
2024-09-06 15:32:16,478 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): openaipublic.blob.core.windows.net:443
2024-09-06 15:32:17,338 - urllib3.connectionpool - DEBUG - https://openaipublic.blob.core.windows.net:443 "GET /encodings/cl100k_base.tiktoken HTTP/11" 200 1681126
2024-09-06 15:32:23,030 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/embeddings', 'headers': {'api-key': '4e80a35088e24d8d9960c005a0626b69'}, 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x10bf0eac0>, 'json_data': {'input': [[27384, 162, 101, 241, 49792, 39607, 16325, 9554, 49691, 229, 29245, 255, 49792, 39607, 86206, 49691, 248, 9554, 49792, 39607, 163, 224, 118, 99849, 11571], [27384, 162, 101, 241, 49792, 39607, 16325, 9554, 49691, 229, 29245, 255, 49792, 39607, 16325, 9554, 45829, 49792, 39607, 3922, 51385, 37087, 28425, 108, 25766, 232, 49792, 39607, 86206, 9554, 162, 103, 95, 33976, 21405, 19361, 20648, 103, 98184, 11571], [27384, 162, 101, 241, 49792, 39607, 16325, 9554, 49691, 229, 29245, 255, 49792, 39607, 16325, 9554, 45829, 49792, 39607, 3922, 6, 51385, 37087, 12554, 235, 19630, 105, 49792, 39607, 6, 86206, 49691, 248, 9554, 162, 103, 95, 33976, 19361, 20648, 103, 98184, 11571], [27384, 162, 101, 241, 49792, 39607, 16325, 9554, 49691, 229, 29245, 255, 49792, 39607, 16325, 9554, 45829, 49792, 39607, 3922, 6, 51385, 37087, 12554, 235, 19630, 105, 49792, 39607, 6, 86206, 9554, 14167, 252, 6701, 98, 6, 15120, 63105, 105, 93994, 14167, 252, 162, 103, 95, 33976, 6, 19361, 20648, 103, 98184, 11571], [27384, 162, 101, 241, 49792, 39607, 16325, 9554, 49691, 229, 29245, 255, 49792, 39607, 16325, 9554, 45829, 49792, 39607, 3922, 86206, 6, 26274, 101, 39177, 163, 92871, 31958, 320, 9080, 6708, 231, 163, 229, 230, 22367, 162, 103, 95, 33976, 162, 101, 247, 36117, 244, 9554, 49792, 39607, 19361, 20648, 103, 98184, 11571], [27384, 162, 101, 241, 49792, 39607, 16325, 9554, 49691, 229, 29245, 255, 49792, 39607, 16325, 9554, 45829, 49792, 39607, 80988, 228, 33144, 163, 224, 118, 99849, 11571], [27384, 162, 101, 241, 49792, 39607, 16325, 9554, 49691, 229, 29245, 255, 49792, 39607, 16325, 9554, 45829, 49792, 39607, 3922, 24326, 121, 61056, 19817, 101, 17297, 15120, 20022, 233, 49792, 39607, 163, 224, 118, 99849, 11571], [19000, 6, 27384, 162, 101, 241, 49792, 39607, 6, 16325, 9554, 6, 49691, 229, 29245, 255, 49792, 39607, 6, 3922, 20648, 103, 98184, 49792, 39607, 86206, 6, 26274, 101, 39177, 11883, 25132, 119, 320, 53610, 165, 232, 222, 163, 229, 230, 22367, 162, 103, 95, 33976, 162, 101, 247, 36117, 244, 30], [19000, 6, 27384, 162, 101, 241, 49792, 39607, 6, 16325, 9554, 6, 49691, 229, 29245, 255, 49792, 39607, 6, 3922, 20648, 103, 98184, 49792, 39607, 86206, 14167, 252, 6701, 98, 163, 224, 118, 6, 15120, 63105, 105, 93994, 14167, 252, 6, 9554, 162, 103, 95, 33976, 162, 101, 247, 36117, 244, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}
2024-09-06 15:32:23,032 - openai._base_client - DEBUG - Sending HTTP Request: POST https://aiii-openai-service.openai.azure.com//openai/deployments/ada/embeddings?api-version=2023-05-15
2024-09-06 15:32:23,032 - httpcore.connection - DEBUG - connect_tcp.started host='aiii-openai-service.openai.azure.com' port=443 local_address=None timeout=None socket_options=None
2024-09-06 15:32:23,112 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x112f47050>
2024-09-06 15:32:23,113 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10abd0850> server_hostname='aiii-openai-service.openai.azure.com' timeout=None
2024-09-06 15:32:23,200 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x112f47770>
2024-09-06 15:32:23,200 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-09-06 15:32:23,201 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-09-06 15:32:23,201 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-09-06 15:32:23,201 - httpcore.http11 - DEBUG - send_request_body.complete
2024-09-06 15:32:23,202 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-09-06 15:32:23,292 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Length', b'74610'), (b'Content-Type', b'application/json'), (b'access-control-allow-origin', b'*'), (b'apim-request-id', b'91a1742a-79cd-416e-8107-9d981339920e'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'x-content-type-options', b'nosniff'), (b'x-ms-region', b'Japan East'), (b'x-request-id', b'2f41c152-bb16-41e3-9fdd-a8efbaa9a68b'), (b'x-ms-client-request-id', b'91a1742a-79cd-416e-8107-9d981339920e'), (b'x-ratelimit-remaining-requests', b'349'), (b'azureml-model-session', b'd012-20240618000213'), (b'x-ratelimit-remaining-tokens', b'349619'), (b'Date', b'Fri, 06 Sep 2024 07:32:22 GMT')])
2024-09-06 15:32:23,293 - httpx - INFO - HTTP Request: POST https://aiii-openai-service.openai.azure.com//openai/deployments/ada/embeddings?api-version=2023-05-15 "HTTP/1.1 200 OK"
2024-09-06 15:32:23,293 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-09-06 15:32:23,382 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-09-06 15:32:23,382 - httpcore.http11 - DEBUG - response_closed.started
2024-09-06 15:32:23,383 - httpcore.http11 - DEBUG - response_closed.complete
2024-09-06 15:32:23,383 - openai._base_client - DEBUG - HTTP Response: POST https://aiii-openai-service.openai.azure.com//openai/deployments/ada/embeddings?api-version=2023-05-15 "200 OK" Headers({'content-length': '74610', 'content-type': 'application/json', 'access-control-allow-origin': '*', 'apim-request-id': '91a1742a-79cd-416e-8107-9d981339920e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'x-ms-region': 'Japan East', 'x-request-id': '2f41c152-bb16-41e3-9fdd-a8efbaa9a68b', 'x-ms-client-request-id': '91a1742a-79cd-416e-8107-9d981339920e', 'x-ratelimit-remaining-requests': '349', 'azureml-model-session': 'd012-20240618000213', 'x-ratelimit-remaining-tokens': '349619', 'date': 'Fri, 06 Sep 2024 07:32:22 GMT'})
2024-09-06 15:32:23,383 - openai._base_client - DEBUG - request_id: 2f41c152-bb16-41e3-9fdd-a8efbaa9a68b
2024-09-06 15:32:23,394 - api.v1.endpoints.example_post - ERROR - Error during processing: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
